{% spaceless %}

    {% if tariffResults|length > 0 %}
        <div id="mbh-results-global-wrapper">

            {% if results|length %}
                <div id="mbh-image-show-wrapper"></div>
                <div id="mbh-results-duration">
                    <div id="mbh-result-response-info">
                        <span id="mbh-results-duration-days">{{ results|first.days }}</span>
                        <span id="mbh-results-duration-nights">{{ results|first.nights }}</span>
                    </div>
                    {{ 'views.api.getResultsTable.hotel_rooms_for'|trans({}, 'MBHOnlineBundle') }}
                    {{ results|first.nights }} {{ 'nights'|transchoice(results|first.nights) }} {{ 'from'|trans }}
                    <span id="mbh-results-duration-begin">{{ results|first.begin|date('d.m.Y') }}</span> {{ 'to'|trans }} <span id="mbh-results-duration-end">{{ results|first.end|date('d.m.Y') }}</span>
                </div>
                {% if tariffResults|length > 0 %}
                    {% include 'MBHOnlineBundle:Api:tariffs.html.twig' with {'tariffResults': tariffResults} %}
                {% endif %}

                <div id="mbh-results-table-wrapper">
                    <table id="mbh-results-table">
                        <thead>
                        <tr>
                            <th id="mbh-results-table-th-roomType">{{ 'views.api.getResultsTable.room_type'|trans({}, 'MBHOnlineBundle') }}</th>
                            <th id="mbh-results-table-th-tourist">{{ 'views.api.getResultsTable.guests'|trans({}, 'MBHOnlineBundle') }}</th>
                            <th id="mbh-results-table-th-price">{{ 'views.api.getResultsTable.price'|trans({}, 'MBHOnlineBundle') }}</th>
                            <th id="mbh-results-table-th-amount">{{ 'views.api.getResultsTable.rooms_amount'|trans({}, 'MBHOnlineBundle') }}</th>
                        </tr>
                        </thead>

                        {% for result in results %}
                            <tbody>
                            <tr class="{{ cycle(['odd', 'even'], loop.index0) }}">
                                <td class="mbh-left">
                        <span class="mbh-results-tariff"
                              data-id="{{ result.tariff.id }}">{{ result.tariff.fullTitle }}</span>
                                    {% if result.roomType.getMainImage is not empty %}
                                        <img class="mbh-roomType-image"
                                             src="{{ url('_welcome')|replace({'app_dev.php/': ''}) }}{{ result.roomType.getMainImage.getWebPath }}">
                                    {% endif %}
                                    <span class="mbh-results-roomType"
                                          data-id="{{ result.roomType.id }}">{{ result.roomType.localeTitle(app.request.locale) }}</span>
                                    {% if hotels|length > 1 %}<span class="mbh-results-hotel"
                                                                    data-id="{{ result.roomType.hotel.id }}">{{ result.roomType.hotel.fullTitle }}</span>{% endif %}
                                    {% if result.roomType.description is not empty %}
                                        <div class="mbh-results-roomType-description-wrappper">
                                            <a href="#" class="mbh-results-roomType-description-link"> <i
                                                        class="fa fa-angle-right "> </i> {{ 'views.api.getResultsTable.room_description'|trans({}, 'MBHOnlineBundle') }}
                                            </a>
                                        </div>
                                    {% endif %}
                                </td>
                                <td class="mbh-center">
                                    <select class="mbh-results-tourists-select select2 {% if result.prices|length == 1 %}hidden{% endif %}">
                                        {% for priceTourists, price  in result.prices %}
                                            {% set arr = priceTourists|split('_') %}
                                            <option value="{{ priceTourists }}">
                                                {% if arr[0] %}{{ arr[0] }} вз.{% endif %}{% if arr[1] and arr[0] %}+{% endif %}{% if arr[1] %}{{ arr[1] }} рб.{% endif %}
                                            </option>
                                        {% endfor %}
                                    </select>
                                    {% if result.prices|length == 1 %}
                                        {% for priceTourists, price  in result.prices %}
                                            {% set arr = priceTourists|split('_') %}
                                            {% if arr[0] %}{% for i in 1..arr[0] %}<i
                                                    class="fa fa-male"></i>&nbsp;{% endfor %}{% endif %}
                                            {% if arr[1] %}{% for k in 1..arr[1] %}
                                                <small><i class="fa fa-child"></i></small>&nbsp;{% endfor %}{% endif %}
                                        {% endfor %}
                                    {% endif %}
                                </td>
                                <td class="mbh-right">
                                    {% for priceTourists, price  in result.prices %}

                                        <ul class="mbh-results-prices">
                                            <li data-value="{{ price }}"
                                                class="{{ priceTourists }}">{{ price|number_format }} {{ currency().text }}
                                        </ul>

                                    {% endfor %}


                                </td>
                                <td class="mbh-center">
                                    <select class="mbh-results-packages-count select2">
                                        {% if  result.roomsCount > config.packages_max %}
                                            {% set max = config.packages_max %}
                                        {% else %}
                                            {% set max = result.roomsCount %}
                                        {% endif %}
                                        <option value="0" selected="selected">0</option>
                                        {% for i in 1..max %}
                                            <option value="{{ i }}">{{ i }}</option>
                                        {% endfor %}
                                    </select>
                                </td>
                            </tr>
                            {% if result.roomType.description is not empty %}
                                <tr class="mbh-left mbh-results-roomType-description-tr">
                                    <td class="mbh-left mbh-results-roomType-description" colspan="5">
                                        {% if result.roomType.facilities is not empty %}
                                            <ul class="inline-facility">
                                                {% for facility in result.roomType.facilities %}
                                                    <li><button class="btn btn-xs btn-default"><span class="{{ facility }}">{{ facility }}</span></button></li>
                                                {% endfor %}
                                            </ul>
                                        {% endif %}
                                        {{ result.roomType.description|raw }}
                                    </td>
                                </tr>
                            {% endif %}
                            </tbody>
                        {% endfor %}
                    </table>
                </div>

                <div id="mbh-results-actions">
                    <span id="mbh-results-packages-total"> {{ 'views.api.getResultsTable.rooms'|trans({}, 'MBHOnlineBundle') }}
                        <span id="mbh-results-total-packages-sum" class="mbh-results-total-sum">0</span>&nbsp;<span
                                class="mbh-results-total-sum">{{ currency().text }}</span></span> &nbsp;
                    <span id="mbh-results-services-total" style="display: none;"> {{ 'views.api.getResultsTable.services'|trans({}, 'MBHOnlineBundle') }}
                        <span id="mbh-results-total-services-sum" class="mbh-results-total-sum">0</span>&nbsp;<span
                                class="mbh-results-total-sum">{{ currency().text }}</span></span> &nbsp;
                    <span id="mbh-results-total">{{ 'views.api.getResultsTable.result'|trans({}, 'MBHOnlineBundle') }}
                        <span id="mbh-results-total-sum" class="mbh-results-total-sum">0</span>&nbsp;<span
                                class="mbh-results-total-sum">{{ currency().text }}</span></span>
                    <button id="mbh-results-next"
                            class="button"> {{ 'views.api.getResultsTable.continue'|trans({}, 'MBHOnlineBundle') }}
                        <small><i class="fa fa-chevron-right "></i></small>
                    </button>
                </div>
            {% else %}
                {% if tariffResults|length > 0 %}
                    {% include 'MBHOnlineBundle:Api:tariffs.html.twig' with {'tariffResults': tariffResults} %}
                {% endif %}
                <div class="mbh-results-error"><i
                            class="fa fa-exclamation-circle"> </i> {{ 'views.api.getResultsTable.nothing_found_for_your_query'|trans({}, 'MBHOnlineBundle') }}
                </div>
            {% endif %}
        </div>
    {% else %}
        <div class="mbh-results-error"><i
                    class="fa fa-exclamation-circle"> </i> {{ 'views.api.getResultsTable.nothing_found_for_your_query'|trans({}, 'MBHOnlineBundle') }}
        </div>
    {% endif %}
    <style>
        @font-face {
            font-family: 'MaxiBooking';
            font-weight: 700;
            font-style: normal;
            src: local('MaxiBooking'), url("http://{{ domainName }}/bundles/mbhbase/css/mbsuperfont/fonts/mbsuperfont.woff") format('woff');
        }

        /* Custom Icons */
        [class^="mbf-"], [class*=" mbf-"] {
            font-family: MaxiBooking;
            font-style: normal;
            font-weight: normal;
            text-decoration: inherit;
        }
        .mbf-clock:before {
            content: "\e001";
        }
        .mbf-flame:before {
            content: "\e002";
        }
        .mbf-fold:before {
            content: "\e003";
        }
        .mbf-gift:before {
            content: "\e004";
        }
        .mbf-globe:before {
            content: "\e005";
        }
        .mbf-key:before {
            content: "\e006";
        }
        .mbf-bell-two:before {
            content: "\e007";
        }
        .mbf-bell:before {
            content: "\e008";
        }
        .mbf-first-aid:before {
            content: "\e009";
        }
        .mbf-ambulance:before {
            content: "\e00a";
        }
        .mbf-briefcase:before {
            content: "\e00b";
        }
        .mbf-home:before {
            content: "\e00c";
        }
        .mbf-hospital:before {
            content: "\e00d";
        }
        .mbf-adjust:before {
            content: "\e00e";
        }
        .mbf-wifi:before {
            content: "\e00f";
        }
        .mbf-air:before {
            content: "\e010";
        }
        .mbf-lock:before {
            content: "\e011";
        }
        .mbf-internet:before {
            content: "\e012";
        }
        .mbf-plug:before {
            content: "\e013";
        }
        .mbf-ruby:before {
            content: "\e014";
        }
        .mbf-sign-in:before {
            content: "\e015";
        }
        .mbf-tools:before {
            content: "\e016";
        }
        .mbf-animals:before {
            content: "\e017";
        }
        .mbf-no-animals:before {
            content: "\e018";
        }
        .mbf-metro:before {
            content: "\e019";
        }
        .mbf-car-side:before {
            content: "\e01a";
        }
        .mbf-cc-nc:before {
            content: "\e01b";
        }
        .mbf-monitor:before {
            content: "\e01c";
        }
        .mbf-thumbs-up:before {
            content: "\e01d";
        }
        .mbf-toilets:before {
            content: "\e01e";
        }
        .mbf-telephone:before {
            content: "\e01f";
        }
        .mbf-swimming:before {
            content: "\e020";
        }
        .mbf-skiing:before {
            content: "\e021";
        }
        .mbf-shopping:before {
            content: "\e022";
        }
        .mbf-chapel:before {
            content: "\e023";
        }
        .mbf-lodging:before {
            content: "\e025";
        }
        .mbf-golf:before {
            content: "\e026";
        }
        .mbf-disability:before {
            content: "\e027";
        }
        .mbf-parking:before {
            content: "\e02a";
        }
        .mbf-armchair:before {
            content: "\e02b";
        }
        .mbf-bar:before {
            content: "\e02c";
        }
        .mbf-beach-bar:before {
            content: "\e02d";
        }
        .mbf-bar3:before {
            content: "\e02e";
        }
        .mbf-credit-card:before {
            content: "\e02f";
        }
        .mbf-torchere:before {
            content: "\e030";
        }
        .mbf-platen:before {
            content: "\e031";
        }
        .mbf-taxi:before {
            content: "\e032";
        }
        .mbf-bath:before {
            content: "\e033";
        }
        .mbf-bed:before {
            content: "\e034";
        }
        .mbf-double-bed:before {
            content: "\e035";
        }
        .mbf-beer:before {
            content: "\e036";
        }
        .mbf-reception:before {
            content: "\e037";
        }
        .mbf-baggage-man:before {
            content: "\e038";
        }
        .mbf-bookcase:before {
            content: "\e039";
        }
        .mbf-cafeteria:before {
            content: "\e03a";
        }
        .mbf-camera:before {
            content: "\e03b";
        }
        .mbf-breakfast:before {
            content: "\e03c";
        }
        .mbf-keys:before {
            content: "\e03d";
        }
        .mbf-homecinema:before {
            content: "\e03e";
        }
        .mbf-board-games:before {
            content: "\e03f";
        }
        .mbf-washbasin:before {
            content: "\e040";
        }
        .mbf-fastfood:before {
            content: "\e041";
        }
        .mbf-restaurant:before {
            content: "\e042";
        }
        .mbf-dresstable:before {
            content: "\e043";
        }
        .mbf-coffee:before {
            content: "\e044";
        }
        .mbf-baggage-safe:before {
            content: "\e045";
        }
        .mbf-wardrobe:before {
            content: "\e046";
        }
        .mbf-chair:before {
            content: "\e047";
        }
        .mbf-maleroom:before {
            content: "\e048";
        }
        .mbf-menu:before {
            content: "\e049";
        }
        .mbf-radio:before {
            content: "\e04a";
        }
        .mbf-food-delivery:before {
            content: "\e04b";
        }
        .mbf-kitchen:before {
            content: "\e04c";
        }
        .mbf-safebox:before {
            content: "\e04d";
        }
        .mbf-lounge:before {
            content: "\e04e";
        }
        .mbf-shower:before {
            content: "\e04f";
        }
        .mbf-sink:before {
            content: "\e050";
        }
        .mbf-sofa:before {
            content: "\e051";
        }
        .mbf-stake:before {
            content: "\e052";
        }
        .mbf-table:before {
            content: "\e053";
        }
        .mbf-ws:before {
            content: "\e054";
        }
        .mbf-femaleroom:before {
            content: "\e055";
        }
        .mbf-washmachine:before {
            content: "\e056";
        }
        .mbf-modern-tv:before {
            content: "\e057";
        }
        .mbf-old-tv:before {
            content: "\e058";
        }
        .mbf-travelling:before {
            content: "\e059";
        }
        .mbf-teapot:before {
            content: "\e05a";
        }
        .mbf-female:before {
            content: "\e028";
        }
        .mbf-male:before {
            content: "\e024";
        }
        .mbf-mb-logo:before {
            content: "\e000";
        }
        .mbf-blind:before {
            content: "\e029";
        }
        .mbf-disc-floppy:before {
            content: "\e05b";
        }
        .mbf-heart-broken:before {
            content: "\e05c";
        }
        .mbf-fan:before {
            content: "\e05d";
        }
        .mbf-fitness:before {
            content: "\e05e";
        }
        .mbf-conditioner:before {
            content: "\e05f";
        }
        .mbf-safe:before {
            content: "\e060";
        }
        .mbf-spa:before {
            content: "\e061";
        }
        .mbf-sauna:before {
            content: "\e062";
        }
        .mbf-free-wifi:before {
            content: "\e063";
        }
        .mbf-iron:before {
            content: "\e064";
        }
        .mbf-fridge:before {
            content: "\e065";
        }
        .mbf-airbnb:before {
            content: "\e066";
        }
        .mbf-booking:before {
            content: "\e067";
        }
        .mbf-clean:before {
            content: "\e068";
        }
        .mbf-hotelinn:before {
            content: "\e069";
        }
        .mbf-myallocator:before {
            content: "\e06a";
        }
        .mbf-oktogo:before {
            content: "\e06b";
        }
        .mbf-vashotel:before {
            content: "\e06c";
        }
        .mbf-ostrovok:before {
            content: "\e06d";
        }

    </style>
{% endspaceless %}