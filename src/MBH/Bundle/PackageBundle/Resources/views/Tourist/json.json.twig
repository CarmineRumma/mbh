{
    "draw" : "{{ draw }}",
    "recordsTotal": "{{ total }}",
    "recordsFiltered": "{{ total }}",
    "data": [
        {% for tourist in tourists %}
            {% set package = touristPackages[tourist.id] %}
            [
                "<div class='text-center'><i class='fa fa-male'></i></div>",
                "{% embed 'MBHBaseBundle:Actions:entry_link.html.twig' with {'entity': tourist, 'route': 'tourist'} %}{% endembed %} {% if tourist.isUnwelcome %}<a href='{{ path('tourist_edit_unwelcome', {id: tourist.id}) }}'><i data-toggle='tooltip' data-original-title='Клиент в черном списке' class='fa fa-user-secret unwelcome-icon'></i></a>{% else %}&nbsp;<i style='opacity:0.4' data-toggle='tooltip' data-original-title='Клиент не в черном списке' class='fa fa-check-circle'></i>{% endif %}<br><small>{{ tourist.citizenship.name|default('') }}</small>",
                "{% if tourist.documentRelation and tourist.documentRelation.number and tourist.documentRelation.type or (tourist.visa and tourist.visa.number) or (tourist.migration and tourist.migration.number) %}<span class='label label-default'><i style='padding: 3px; cursor: pointer;' data-toggle='popover' title='Документы' data-content='{% if tourist.documentRelation and tourist.documentRelation.number and tourist.documentRelation.type %}<strong>{{ vegaDocumentTypes[tourist.documentRelation.type] }}</strong> {{ tourist.documentRelation.number|default('') }}{% if tourist.documentRelation.issued %}<br><small> до {{ tourist.documentRelation.issued|date('d.m.Y') }}</small>{% endif %}<br>{% endif %}{% if tourist.visa and tourist.visa.number %}<strong>Виза</strong> {{ tourist.visa.number }}{{ tourist.visa.expiry ? ('<br><small>до ' ~ tourist.visa.expiry|date('d.m.Y') ~ '</small>')|raw : '' }}{{ tourist.migration and tourist.migration.number ? '<br><strong>Миграционная карта</strong> ' ~ tourist.migration.number : '' }}{% endif %}' class='fa fa-book'></i></span>{% endif %}",
                "{% if package and package.begin %}{{ (package.begin|mbh_format ~ '-' ~ package.end|mbh_format)|raw }}{% endif %}<br><small>{{ package and package.accommodation ? 'Номер: ' ~ package.accommodation : '' }}</small>",
                "{% if tourist.birthday %}{{ tourist.birthday|date('d.m.Y')}}{% if tourist.age %}<br><small>{{ tourist.age }}</small>{% endif %}{% endif %}",
                "{{ tourist.phone|default('-') }}<br><small>{% if tourist.email %}<a href='mailto:{{ tourist.email }}'>{{ tourist.email }}</a>{% endif %}</small>",
                "<div class='btn-list'>{% embed 'MBHBaseBundle:Actions:entry_actions.html.twig' with {'entity': tourist, 'route': 'tourist'} %}{% endembed %}</div>"
            ]{% if loop.index != tourists.count(true) %},{% endif %}
        {% endfor %}
    ]
}