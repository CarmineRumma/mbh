{% extends 'MBHPackageBundle:Package:layout.html.twig' %}

{% set small_title = 'package.edit.edit_reservation'|trans({}, 'MBHPackageBundle') ~ ' ' ~ entity.numberWithPrefix %}

{% block content %}
    {{ form_start(form, {'action': path('package_service_edit', {'id': entity.id, 'serviceId': service.id}), 'method': 'PUT', 'attr': {'class': 'form-horizontal' }}) }}
    {{ form_widget(form) }}
    {% include 'MBHPackageBundle:Package:actions.html.twig' with {'entity': entity, 'delete_route': 'package_delete' } %}
    {{ form_end(form) }}
{% endblock %}

{% block scripts %}
    {{ parent() }}

    <script>
        var services = {
                    'package_duration': {{ service.nights }},
                    'package_guests': {{ service.persons }},
                    'package_one_day_price': {{ service.price }},
                    'service_amount' : {{ service.amount }},
                    {% for category in entity.tariff.hotel.servicesCategories %}
                    {% for service in category.services %}
                    '{{ service.id}}': {
                        'date': {{ service.date ? 1 : 0}},
                        'time': {{ service.time ? 1 : 0 }},
                        'calcType': '{{ service.calcType}}',
                        'calcTypeStr': '{{ config.calcTypes[service.calcType]}}',
                        'price': {% if service.calcType == 'day_percent' %}{{ entity.oneDayPrice() }} * {{ service.price}} / 100 {% else %} {{ service.price}} {% endif %}
                },
                {% endfor %}
                {% endfor %}

                };
    </script>
{% endblock %}