{% if error is defined and error is not empty and error %}
    <div class="alert alert-warning"><i class="fa fa-exclamation-circle"> </i> {{ error }}</div>
{% else %}
    {% if dynamicSales|length > 0 %}
        {% set commonDynamicSalesData = dynamicSales[0] %}
        {% set maxCount = 0 %}
        {% set periodsCount = commonDynamicSalesData.periods|length %}
        {% for dynamicSalePeriodCount in commonDynamicSalesData.periods %}
            {% if maxCount < dynamicSalePeriodCount|length %}
                {% set maxCount = dynamicSalePeriodCount|length %}
            {% endif %}
        {% endfor %}

        <table id="headerTable" class="table table-bordered table-striped table-condensed mbh-grid text-center">
            <tbody>
            <tr class="dates">
                <td class="first-th line-name" rowspan="{{ periodsCount }}"></td>
                <td class="first-th periods-cell" rowspan="{{ periodsCount }}">
                    <small>{{ 'dynamic.sales.day.periods'|trans({},'MBHPackageBundle') }}</small>
                </td>
                {% for dynamicSalePeriod in commonDynamicSalesData.periods %}
                {% set index = loop.index %}
                {% if loop.index != 1 %}
            <tr class="dates">
                {% endif %}
                {% for dynamicSaleDay  in dynamicSalePeriod %}
                    {% if not loop.last %}
                        <td class="header-td table-cell text-center {% if dynamicSaleDay.dateSales|date('N') >= 6 %} text-danger{% endif %}">
                            {{ dynamicSaleDay.dateSales|date('d.m') }}
                            <div class="text-muted text-center {% if dynamicSaleDay.dateSales|date('N') >= 6 %} text-danger{% endif %}">
                                {{ weekdays[dynamicSaleDay.dateSales|date('N')]|lower }}
                            </div>
                        </td>
                    {% endif %}
                {% endfor %}
                {% if (maxCount - commonDynamicSalesData.periods[index-1]|length) > 0 %}
                    {% for i in 1..(maxCount - commonDynamicSalesData.periods[index-1]|length) %}
                        <td>-</td>
                    {% endfor %}
                {% endif %}
                {% if loop.index == 1 %}
                    <td class="first-th table-cell" rowspan="{{ periodsCount }}">
                        <small>{{ 'dynamic.sales.day.summary'|trans({},'MBHPackageBundle') }}</small>
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
            </tbody>
        </table>

        {% for dynamicSaleTypeData in dynamicSales %}
            <table class="table table-bordered table-condensed rightTable">
                <tbody>
                {% for shownOption in optionsShows %}
                    <tr>
                    <td class="first-th line-name" rowspan="{{ periodsCount }}">
                        <small>{{ ('dynamic.sales.day.' ~ shownOption)|trans({},'MBHPackageBundle') }}</small>
                    </td>
                    {% for dynamicSalePeriod in dynamicSaleTypeData.periods %}
                        {% if  loop.index != 1 %}
                            <tr>
                        {% endif %}
                        <td class="periods-cell" data-class="{{ shownOption }}">
                            {{ dynamicSalePeriod|first.dateSales|date('d.m.Y') }}
                            - {{ dynamicSalePeriod|last.dateSales|date('d.m.Y') }}
                        </td>
                        </tr>
                    {% endfor %}

                {% endfor %}
                </tbody>
            </table>
        {% endfor %}

        {% for dynamicSaleTypeData in dynamicSales %}
            <table id="{{ dynamicSaleTypeData.roomType ? dynamicSaleTypeData.roomType.id : 'summary' }}"
                   class="dynamic-sales-table table table-bordered not-auto-datatable table-striped table-hover table-condensed mbh-grid text-center">
                <tbody>
                <tr class="mbh-grid-header2 warning">
                    <td colspan="{{ maxCount +2 }}" style="text-align: left">
                        <strong class="room-type-title-string">
                        {% if (dynamicSaleTypeData.roomType is null ) %}
                            {{ 'dynamic.sales.result'|trans({},'MBHPackageBundle') }}
                        {% else %}
                            {{ dynamicSaleTypeData.roomType.title }}
                        {% endif %}
                        </strong>&nbsp;&nbsp;
                    </td>
                </tr>
                {% for shownOption in optionsShows %}
                <tr data-class="{{ shownOption }}">
                    <td class="left-offset-line"></td>
                    {% for dynamicSalePeriod in dynamicSaleTypeData.periods %}
                    {% set index = loop.index %}
                    {% if  loop.index != 1 %}
                        <tr data-class="{{ shownOption }}">
                    {% endif %}

                    {% for dynamicSaleDay in dynamicSalePeriod %}
                        {% if loop.last %}
                            {% if (maxCount - dynamicSaleTypeData.periods[index-1]|length) > 0 %}
                                {% for i in 1..(maxCount - dynamicSaleTypeData.periods[index-1]|length) %}
                                    <td>-</td>
                                {% endfor %}
                            {% endif %}
                            <td class="text-right table-cell" style="text-align: right">
                                <strong>{{ dynamicSaleDay.getSpecifiedValue(shownOption) }}</strong>
                            </td>
                        {% else %}
                            <td class="table-cell">
                                {{ dynamicSaleDay.getSpecifiedValue(shownOption) }}
                            </td>
                        {% endif %}
                    {% endfor %}
                </tr>
                {% endfor %}
                {% endfor %}

                </tbody>
            </table>
        {% endfor %}
    {% endif %}
{% endif %}