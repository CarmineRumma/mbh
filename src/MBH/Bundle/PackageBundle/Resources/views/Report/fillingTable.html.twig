<table id="filling-table" class="table table-bordered not-auto-datatable table-striped table-hover table-condensed mbh-grid">
    <tbody>
    <tr class="header">
        <td>Даты</td>
        {% for date in rangeDateList %}
            <td>{{ date|mbh_format }}</td>
        {% endfor %}
        <td>Итого</td>
    </tr>

    {% for roomType in roomTypes %}
        {% set tableData = (tableDataByRoomType[roomType.id] is defined ? tableDataByRoomType[roomType.id] : null) %}
        <tr class="mbh-grid-header1 info">
            <td colspan=" {{ rangeDateList|length + 2 }}  ">
                <strong>{{ roomType.fullTitle }}</strong>
            </td>
        </tr>

        <tr>
            <td>Номеров в продаже</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.totalRooms|default(0) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.totalRooms|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Забронировано номеров</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.packagesCount|default(0) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.packagesCount|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Забронировано номеров %</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.packagesCountPercent|default(0)|number_format(2) }} %
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.packagesCountPercent|default(0)|number_format(2) }} %
                </strong>
            </td>
        </tr>

        <tr>
            <td>Неоплаченные номера</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.notPaidRooms|default(0) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.notPaidRooms|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Стоимость бронирования</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.packagePrice|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.packagePrice|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Стоимость услуг</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.servicePrice|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.servicePrice|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Стоимость</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.price|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.price|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Получено</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.paid|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.paid|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Получено %</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.paidPercent|default(0)|number_format(2) }} %
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.paidPercent|default(0)|number_format(2) }} %
                </strong>
            </td>
        </tr>
        <tr>
            <td>Долг</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.debt|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.debt|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Макс. выручка</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.maxIncome|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.maxIncome|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Выручка от макс. %</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.maxIncomePercent|default(0)|number_format(2) }} %
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.maxIncomePercent|default(0)|number_format(2) }} %
                </strong>
            </td>
        </tr>
        <tr>
            <td>Гостей</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.guests|default(0) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.guests|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
        <tr>
            <td>Гостей на номер</td>
            {% for date in rangeDateList %}
                {% set row = tableData.rows[date|date('d.m.Y')] is defined ? tableData.rows[date|date('d.m.Y')] : null %}
                <td class="content">
                    {{ row.roomGuests|default(0)|number_format(2) }}
                </td>
            {% endfor %}
            <td class="content-total">
                <strong>
                    {{ tableData.totals.roomGuests|default(0)|number_format(2) }}
                </strong>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>