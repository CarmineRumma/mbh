<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <style>
        .document{
            padding-top: 0px;
            width: 900px;
            margin: 0 auto;
        }

        .ib{
            display: inline-block;
        }

        .area {
            border-bottom: solid #000000 1px;
        }

        .left {
            float: left;
        }

        /* Header */
        .header .title {
            float: left;
            padding-top: 10px;
            width:90%;
        }
        .header .title p {
            font-weight: bold;
            font-size: 22px
        }
        .header .logo {
            float: right;
            width:10%;
        }
        .header .logo img{
            height: 80px; max-width: 200px;
        }

        .main{
            padding-top: 20px;
        }

        .indent {
            text-indent: 1.5em;
        }
        .table {
            margin: 10px 0px 10px 0px;
            width: 100%;
        }
        .table td {
            padding: 3px;
        }
    </style>
</head>
<body>
<div class="document">
    {% set hotel = null %}
    {% set tourist = null %}
    {% set documentRelation = null %}

    {% if entity.roomType and entity.roomType.hotel %}
        {% set hotel = entity.roomType.hotel %}
    {% endif %}

    {% if entity.order and entity.order.mainTourist %}
        {% set tourist = entity.order.mainTourist %}
    {% endif %}

    {% if tourist and tourist.documentRelation %}
        {% set documentRelation = tourist.documentRelation %}
    {% endif %}

    <div class="header">
        <div class="title">
            <p>
                Подтверждение брони № {{ entity.number }} от {{ entity.createdAt|date("d.m.Y") }} г.
            </p>
        </div>
        {% if hotel and hotel.logoUrl %}
            <div class="logo">
                <img src="{{ asset(hotel.logoUrl, absolute=true) }}">
            </div>
        {% endif %}
        <div style="clear: both"></div>
    </div>

    <!--
    <table class="header">
        <tr class="title">
            <td>
                <p>
                    Подтверждение брони № {{ entity.number }} от {{ entity.createdAt|date("d.m.Y") }} г.
                <p>
            </td>
            <td>
                <div class="logo">
                    <img src="{{ asset(hotel.logoUrl, absolute=true) }}">
                </div>
            </td>
        </tr>
    </table>
    -->
    <hr>

    <div class="main">
        <p class="indent">Отель {% if hotel and hotel.name %}<strong>"{{ hotel.name }}"</strong> {% else %}____________________{% endif %}, расположенный по
            адресу: {% if hotel and hotel.city and hotel.street %}
            {{ hotel.country }}, {{ hotel.region }}, г. {{ hotel.city }}{% if hotel.settlement %}, {{ hotel.settlement }}{% endif %}, {{ hotel.street }},
                {% if hotel.house %} д. {{ hotel.house }}{% endif %}{% if hotel.corpus %}, кор. {{ hotel.corpus }}{% endif %}{% if hotel.flat %}, кв. {{ hotel.flat }} {% endif %} {% else %}_________________________________________{% endif %},
            ИНН {% if hotel and hotel.organization and hotel.organization.inn %} {{ hotel.organization.inn }} {% else %} ________________________ {% endif %} извещает
            Заказчика:
        </p>


        <style>
            .ta table {
                margin-left: 1.5em; width: 890px;
            }
        </style>
        <div class="ta">
            <table border="0">
                <tbody>
                <tr>
                    <td style="width: 40px">Ф.И.О.</td>
                    <td style="width: 60%;">
                        <div class="area">&nbsp{% if tourist %}{{ tourist.fullName }}{% endif %}</div>
                    </td>
                    <td style="width: 130px">дата рождения</td>
                    <td><div class="area">&nbsp{% if tourist and tourist.birthday %}{{ tourist.birthday|date('d.m.Y') }}{% endif %}</div></td>
                </tr>
                </tbody>
            </table>
            <table border="0">
                <tbody>
                <tr>
                    <td style="width: 20px">адрес</td>
                    <td>
                        <div class="area">&nbsp
                            {% if tourist and tourist.addressObjectDecomposed %}
                                {{ tourist.addressObjectDecomposed.country }}, {{ tourist.addressObjectDecomposed.region }}{% if tourist.addressObjectDecomposed.city %}, г.{{ tourist.addressObjectDecomposed.city }}{% endif %}{% if tourist.addressObjectDecomposed.street %}, ул. {{ tourist.addressObjectDecomposed.street }}{% endif %}
                                {% if tourist.addressObjectDecomposed.house %},
                                    д.{{ tourist.addressObjectDecomposed.house }}
                                    {% if tourist.addressObjectDecomposed.corpus %}, кор. {{ tourist.addressObjectDecomposed.corpus }}{% endif %}
                                    {% if tourist.addressObjectDecomposed.flat %}, кв. {{ tourist.addressObjectDecomposed.flat }}{% endif %}
                                {% endif %}
                            {% endif %}
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
            <table border="0">
                <tbody>
                <tr>
                    <td>тип документа</td>
                    <td style="width: 45%"><div class="area">&nbsp{% if documentRelation and documentRelation.type %}{{ documentRelation.type|trans({})|capitalize }}{% endif %}</div></td>

                    <td>серия</td>
                    <td style="width: 15%"><div class="area">&nbsp{% if documentRelation and documentRelation.series %}{{ documentRelation.series }}{% endif %}</div></td>

                    <td>№</td>
                    <td style="width: 15%"><div class="area">&nbsp{% if documentRelation and documentRelation.number %}{{ documentRelation.number }}{% endif %}</div></td>
                </tr>
                </tbody>
            </table>
            <table border="0">
                <tbody>
                <tr>
                    <td style="width: 50px">выдан</td>
                    <td>
                        <div class="area">
                            &nbsp
                            {% if documentRelation and documentRelation.authority %}
                                {{ documentRelation.authority }}{% if documentRelation and documentRelation.issued %},
                                {{ documentRelation.issued|date('d.m.Y') }}
                            {% endif %}
                            {% endif %}
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <p>
            о нижеследующем:
        </p>
        <p>
            Отель гарантированно бронирует для Заказчика следующие услуги:
        </p>

        <!-- Services -->
        <table border="1" cellpadding="0" cellspacing="0" class="table">
            <thead>
            <tr>
                <th style="width: 30px;">№</td>
                <th style="width: 100px;">Наименование услуг</th>
                <th style="width: 30px;">{{ "package.pdf.amount"|trans({}, "MBHPackageBundle") }}</td>
                <th style="width: 30px;">{{ "package.pdf.unit"|trans({}, "MBHPackageBundle") }}</td>
                <th style="width: 100px;">Цена</td>
                <th style="width: 100px;">Сумма</td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td align="center">1</td>
                <td>{{ "package.pdf.living_in_hotel"|trans({}, "MBHPackageBundle") }} {{ entity.begin|date('d.m.Y') }} - {{ entity.end|date('d.m.Y') }}</td>
                <td align="center">{{ entity.nights }}</td>
                <td align="center">{{ "package.pdf.noch"|trans({}, "MBHPackageBundle") }}</td>
                <td align="right">{{ (entity.packagePrice(true)/entity.nights)|round(1)|number_format }}</td>
                <td align="right">{{ entity.packagePrice(true)|number_format }}</td>
            </tr>
            {% if params.hasServices is defined and params.hasServices %}
                {% for packageService in entity.services %}
                    <tr>
                        <td align="center">{{ loop.index + 1 }}</td>
                        <td>{{ packageService.service.name }}</td>
                        <td align="center">{{ packageService.amount }}</td>
                        <td align="center">шт.</td>
                        <td align="right">{{ packageService.price|number_format(2) }}</td>
                        <td align="right">{{ packageService.total|number_format(2) }}</td>
                    </tr>
                {% endfor %}
            {% endif %}
            </tbody>
        </table>

        <table border="0" width="100%">
            <tr>
                <td align="right"><strong>Итого:</strong></td>
                <td align="right" style="width: 100px;"><strong>{{ (entity.servicesPrice + entity.packagePrice(true))|number_format(2) }}</strong></td>
            </tr>
            <tr>
                <td align="right"><strong>В том числе НДС:</strong></td>
                <td align="right"><strong>0</strong></td>
            </tr>
        </table>

        <p>Всего заказано услуг {{ entity.services|length + 1 }}, на сумму {{ (entity.servicesPrice + entity.packagePrice(true))|number_format(2) }} руб.<br>
            <strong>{{ entity.price|num2str|capitalize }}</strong></p>

        <p>
            Примечание: в случае несвоевременного отказа от заказанных услуг, Отель имеет право на удержание конпенсации из внесенной предоплаты.
        </p>

        <table class="signatures" cellpadding="0" cellspacing="0">
            <tr>
                <td style="width: 40%">
                    <h3>Отель</h3>
                    <div class="area"></div>
                </td>
                <td style="width: 20%"></td>
                <td style="width: 40%">
                    <h3>Заказчик</h3>
                    <div class="area"></div>
                </td>
            </tr>
            <tr>
                <td align="center">
                    {% if hotel and hotel.organization %}{{ hotel.organization.directorFio }}{% endif %}
                </td>
                <td></td>
                <td align="center">
                    {% if tourist %}{{ tourist.lastNameWithInitials }}{% endif %}
                </td>
            </tr>
        </table>


        {% if params.hasPrint is defined and params.hasPrint %}
            Печать
        {% endif %}

        <style>
            .signatures {
                border: 0;
                width: 100%;
            }

            .signatures .area{
                border-bottom: 1px solid #000;
                height: 80px;
            }
        </style>
    </div>
</div>
</body>
</html>