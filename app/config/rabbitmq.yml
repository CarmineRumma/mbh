#rabbitmq-supervisor-setup
rabbit_mq_supervisor:
    worker_count:                       1 # number of workers per queue
    supervisor_instance_identifier:     "%supervisor_instance_name%"
    paths:
        workspace_directory:            '%supervisor_workspace_directory%'
        configuration_file:             '%supervisor_configuration_file%'
        pid_file:                       '%supervisor_pid_file%'
        sock_file:                      '%supervisor_sock_file%'
        log_file:                       '%supervisor_log_file%'
        worker_configuration_directory: '%supervisor_worker_configuration_directory%'
        worker_output_log_file:         '%supervisor_worker_output_log_file%'
        worker_error_log_file:          '%supervisor_worker_error_log_file%'
    commands:
        rabbitmq_consumer: rabbitmq:consumer -m 1 %%2$s
        rabbitmq_multiple_consumer:     user-specific-command:multiple-consumer -m %%1$d %%2$s

#rabbitmq
old_sound_rabbit_mq:
    connections:
        default:
            host:     "%rabbitmq_host%"
            port:     "%rabbitmq_port%"
            user:     "%rabbitmq_user%"
            password: "%rabbitmq_password%"
            vhost:    "%rabbitmq_vhost%"
            lazy:     false
            connection_timeout: 3
            read_write_timeout: 3
            keepalive: true
            heartbeat: 0
            use_socket: false
    producers:
      task_room_cache_recalculate:
        connection:       default
        exchange_options: {name: 'task_room_cache_recalculate', type: direct}
      # task_notice_unpaid_order:
      #   connection:       default
      #   exchange_options: {name: 'task_notice_unpaid_order', type: direct}
    consumers:
      task_room_cache_recalculate:
        connection:       default
        exchange_options: {name: 'task_room_cache_recalculate', type: direct}
        queue_options:    {name: 'task_room_cache_recalculate'}
        callback:         task_room_cache_recalculate
      # task_notice_unpaid_order:
      #   connection:       default
      #   exchange_options: {name: 'task_notice_unpaid_order', type: direct}
      #   queue_options:    {name: 'task_notice_unpaid_order'}
      #   callback:         task_notice_unpaid_order
      #   idle_timeout:     10
